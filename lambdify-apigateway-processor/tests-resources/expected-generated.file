package lambdify.apigateway.apt;

import java.util.*;
import java.math.*;

@javax.annotation.Generated( "Generated by Lambdify" )
public class MyAnnotatedResourceRouter implements lambdify.apigateway.Router {

	/* The wrapped instance */
	private final lambdify.apigateway.apt.MyAnnotatedResource instance;

    public lambdify.apigateway.Router.Entry<lambdify.apigateway.Router.Route, lambdify.apigateway.Router.LambdaFunction>[] getRoutes() {
		return arrayOf(
								lambdify.apigateway.Methods.GET.and( "/api/users/:id" ).with( this::getUser )
				,				lambdify.apigateway.Methods.POST.and( "/api/users" ).withNoContent( this::saveUser )
				,				lambdify.apigateway.Methods.PUT.and( "/api/users" ).with( this::updateUser )
		);
	}

    @SafeVarargs
    private static <T> T[] arrayOf( T...ts ){
        return ts;
    }

	/**
	 * Constructor for:
	 * <pre><code>
	 *   new lambdify.apigateway.apt.MyAnnotatedResource( semaphore );
	 * </code></pre>
	 */
	public MyAnnotatedResourceRouter( java.util.concurrent.atomic.AtomicBoolean semaphore ){
	    this.instance = new lambdify.apigateway.apt.MyAnnotatedResource( semaphore );
	}

	lambdify.apigateway.APIGateway.Response getUser(
			lambdify.apigateway.APIGateway.Request request ){
		return lambdify.apigateway.APIGateway.Response.ok(this.instance.getUser(
							request.getPathParam( "id", java.lang.Long.class )
			,				request
		), "");
	}

	void saveUser(
			lambdify.apigateway.APIGateway.Request request ){
		this.instance.saveUser(
							request.getBodyAs( lambdify.apigateway.apt.User.class )
		);
	}

	lambdify.apigateway.APIGateway.Response updateUser(
			lambdify.apigateway.APIGateway.Request request ){
		return this.instance.updateUser(
							request.getQueryParam( "id", java.lang.Long.class )
			,				request.getBodyAs( lambdify.apigateway.apt.User.class )
		);
	}

}
